<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <template id="appointment_submit_template" name="Submit Appointment">
        <t t-call="website.layout">
            <style>
                .booking-header { background: linear-gradient(135deg, #0D47A1 0%, #1976D2 100%); color: white; padding:
                60px 0; border-radius: 0 0 50px 50px; }
                .booking-card {
                border: none;
                border-radius: 25px;
                box-shadow: 0 15px 35px rgba(0,0,0,0.1);
                margin-top: -50px;
                background: rgba(255, 255, 255, 0.95);
                backdrop-filter: blur(10px);
                }
                .form-label { font-weight: 600; color: #0D47A1; margin-bottom: 8px; }
                .form-control { border-radius: 12px; padding: 12px 15px; border: 1px solid #E3F2FD; }
                .form-control:focus { box-shadow: 0 0 0 0.25rem rgba(25, 118, 210, 0.1); border-color: #1976D2; }
                .btn-submit { background: #1976D2; color: white; border-radius: 50px; padding: 15px 40px; font-size:
                1.2rem; font-weight: bold; transition: 0.3s; width: 100%; border: none; }
                .btn-submit:hover { background: #0D47A1; transform: scale(1.02); }
                .input-group-text { background-color: #F0F7FF; border: 1px solid #E3F2FD; border-radius: 12px 0 0 12px;
                color: #1976D2; }
                .datetime-input { font-family: inherit; }
            </style>

            <div id="wrap" class="oe_structure">
                <section class="booking-header text-center">
                    <div class="container">
                        <h1 class="display-5 fw-bold">預約您的優質服務</h1>
                        <p class="lead opacity-75">只需幾分鐘，為您或您的家人安排專業護理</p>
                    </div>
                </section>

                <section class="pb64">
                    <div class="container">
                        <div class="row justify-content-center">
                            <div class="col-lg-8">
                                <div class="card booking-card p-4 p-md-5">
                                    <form action="/elderly_appointment/submit" method="post"
                                          class="js_website_submit_form">
                                        <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>

                                        <div class="row">
                                            <div class="col-12 mb-4">
                                                <label class="form-label"><i class="fa fa-heart me-2"/>選擇服務項目
                                                </label>
                                                <select name="service_id" class="form-select form-control" required="1">
                                                    <t t-foreach="services" t-as="s">
                                                        <option t-att-value="s.id"
                                                                t-att-selected="(target_service_id and s.id == target_service_id) or (not target_service_id and last_booking and last_booking.service_id.id == s.id)">
                                                            <t t-esc="s.name"/>
                                                            (HK$<t t-esc="s.price"/> / <t t-esc="s.unit_name"/>)
                                                        </option>
                                                    </t>
                                                </select>
                                            </div>

                                            <div class="col-md-6 mb-4">
                                                <label class="form-label"><i class="fa fa-user me-2"/>聯繫人姓名
                                                </label>
                                                <input type="text" name="contact_name" class="form-control"
                                                       placeholder="請輸入姓名"
                                                       t-att-value="last_booking.contact_name if last_booking else user.name"
                                                       required="1"/>
                                            </div>
                                            <div class="col-md-6 mb-4">
                                                <label class="form-label"><i class="fa fa-phone me-2"/>聯繫電話
                                                </label>
                                                <input type="tel" name="phone" class="form-control"
                                                       placeholder="例如: 23456789"
                                                       t-att-value="last_booking.phone if last_booking else user.phone"
                                                       required="1"/>
                                            </div>

                                            <div class="col-12 mb-4">
                                                <label class="form-label"><i class="fa fa-envelope me-2"/>電子郵箱
                                                </label>
                                                <input type="email" name="email" class="form-control"
                                                       placeholder="example@mail.com"
                                                       t-att-value="last_booking.email if last_booking else user.email"/>
                                            </div>

                                            <div class="col-md-6 mb-4">
                                                <label class="form-label">
                                                    <i class="fa fa-calendar-plus-o me-2"/>開始時間
                                                    <span class="text-danger">*</span>
                                                </label>
                                                <input type="datetime-local" name="start_time"
                                                       t-att-value="default_start"
                                                       class="form-control datetime-input"
                                                       required="required"/>
                                            </div>

                                            <div class="col-md-6 mb-4">
                                                <label class="form-label">
                                                    <i class="fa fa-calendar-check-o me-2"/>結束時間
                                                    <span class="text-danger">*</span>
                                                </label>
                                                <input type="datetime-local" name="end_time"
                                                       t-att-value="default_end"
                                                       class="form-control datetime-input"
                                                       required="required"/>
                                            </div>

                                            <div class="col-12 mb-4">
                                                <label class="form-label"><i class="fa fa-commenting-o me-2"/>您的特殊需求備註
                                                </label>
                                                <textarea name="note" class="form-control" rows="4"
                                                          placeholder="請告訴我們您需要特別注意的地方...">
                                                    <t t-esc="last_booking.note if last_booking else ''"/>
                                                </textarea>
                                            </div>

                                            <div class="col-12 text-center mt-3">
                                                <button type="submit" class="btn btn-submit shadow-lg">
                                                    確認並提交預約
                                                    <i class="fa fa-paper-plane ms-2"/>
                                                </button>
                                                <p class="text-muted mt-3 small">提交後，我們的專業團隊將在 24
                                                    小時內與您聯絡確認。
                                                </p>
                                            </div>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
            </div>
        </t>
    </template>

    <template id="booking_success_template" name="Booking Success">
        <t t-call="website.layout">
            <div class="container py-5 text-center">
                <div class="py-5 shadow-sm rounded-3 bg-white">
                    <i class="fa fa-check-circle fa-5x text-success mb-4"/>
                    <h1 class="display-4 fw-bold elder-text-blue">預約提交成功！</h1>
                    <p class="lead mb-4">您的預約編號為：
                        <strong class="text-primary">
                            <t t-esc="booking.name"/>
                        </strong>
                    </p>
                    <p class="text-muted mb-5">我們已收到您的請求，稍後將有專人與您聯繫。</p>
                    <a href="/elderly_services" class="btn btn-primary btn-lg rounded-pill px-5">回到首頁</a>
                </div>
            </div>
        </t>
    </template>


</odoo>